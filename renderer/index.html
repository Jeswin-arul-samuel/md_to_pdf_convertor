<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown to PDF Converter</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <div class="sidebar">
      <header>
        <h1>MD to PDF</h1>
        <p class="subtitle">Convert with live preview</p>
        <div class="license-status" id="licenseStatus">
          <span class="license-badge trial" id="licenseBadge">Trial</span>
          <span class="license-info" id="licenseInfo">Loading...</span>
        </div>
      </header>

      <div class="controls">
        <!-- Tab Navigation -->
        <div class="sidebar-tabs">
          <button class="tab-button active" data-tab="files-tab">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="tab-icon">
              <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
              <polyline points="13 2 13 9 20 9"></polyline>
            </svg>
            Files
          </button>
          <button class="tab-button" data-tab="customize-tab">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="tab-icon">
              <circle cx="12" cy="12" r="1"></circle>
              <path d="M12 1v6m0 6v6"></path>
              <path d="M4.22 4.22l4.24 4.24m3.08 3.08l4.24 4.24"></path>
              <path d="M1 12h6m6 0h6"></path>
              <path d="M4.22 19.78l4.24-4.24m3.08-3.08l4.24-4.24"></path>
            </svg>
            Customize
          </button>
        </div>

        <!-- Files Tab Content -->
        <div class="tab-content active" id="files-tab">
          <div class="add-files-section">
          <button class="btn-add-files" id="addFilesBtn">
            <svg class="add-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5v14M5 12h14"></path>
            </svg>
            Add Files
          </button>
          <p class="add-hint">Drag & drop files anywhere or click to browse</p>
          <input type="file" id="fileInput" accept=".md,.markdown" multiple style="display: none;">
        </div>

        <div class="file-list" id="fileList" style="display: none;">
          <div class="file-list-header">
            <span id="fileCount">0 files</span>
            <button class="btn-clear" id="clearAllBtn">Clear All</button>
          </div>
          <div class="files" id="files"></div>
        </div>

        <div class="css-section">
          <label class="checkbox-label">
            <input type="checkbox" id="customCssCheck">
            <span>Custom CSS File</span>
          </label>
          <div class="css-input" id="cssInput" style="display: none;">
            <input type="text" id="cssPath" placeholder="No CSS file" readonly>
            <button class="btn-browse-css" id="browseCssBtn">Browse</button>
          </div>
        </div>
        </div>

        <!-- Customize Tab Content -->
        <div class="tab-content" id="customize-tab">
        <div class="style-options">
          <!-- Typography Section -->
          <div class="style-section" id="typographySection">
            <div class="section-header" data-section="typography">
              <span>Typography</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content open">
              <div class="style-row">
                <label for="fontFamily">Font Family</label>
                <select id="fontFamily">
                  <option value="serif">Serif</option>
                  <option value="sans-serif">Sans-serif</option>
                  <option value="monospace">Monospace</option>
                </select>
              </div>
              <div class="style-row">
                <label for="fontSize">Font Size</label>
                <select id="fontSize">
                  <option value="10pt">Small (10pt)</option>
                  <option value="12pt" selected>Medium (12pt)</option>
                  <option value="14pt">Large (14pt)</option>
                  <option value="16pt">Extra Large (16pt)</option>
                </select>
              </div>
              <div class="style-row">
                <label for="lineHeight">Line Height</label>
                <select id="lineHeight">
                  <option value="1.4">Compact (1.4)</option>
                  <option value="1.6" selected>Normal (1.6)</option>
                  <option value="1.8">Relaxed (1.8)</option>
                  <option value="2.0">Double (2.0)</option>
                </select>
              </div>
              <div class="style-row">
                <label for="headingFont">Heading Font</label>
                <select id="headingFont">
                  <option value="sans-serif" selected>Sans-serif</option>
                  <option value="serif">Serif</option>
                  <option value="same">Same as body</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Layout Section -->
          <div class="style-section" id="layoutSection">
            <div class="section-header" data-section="layout">
              <span>Layout</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content">
              <div class="style-row">
                <label for="pageMargins">Page Margins</label>
                <select id="pageMargins">
                  <option value="0.5in">Narrow (0.5in)</option>
                  <option value="1in" selected>Normal (1in)</option>
                  <option value="1.5in">Wide (1.5in)</option>
                </select>
              </div>
              <div class="style-row">
                <label for="contentWidth">Content Width</label>
                <select id="contentWidth">
                  <option value="600px">Narrow (600px)</option>
                  <option value="800px" selected>Medium (800px)</option>
                  <option value="1000px">Wide (1000px)</option>
                  <option value="100%">Full Width</option>
                </select>
              </div>
              <div class="style-row">
                <label for="paragraphSpacing">Paragraph Spacing</label>
                <select id="paragraphSpacing">
                  <option value="8px">Compact (8px)</option>
                  <option value="16px" selected>Normal (16px)</option>
                  <option value="24px">Relaxed (24px)</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Colors Section -->
          <div class="style-section" id="colorsSection">
            <div class="section-header" data-section="colors">
              <span>Colors</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content">
              <div class="style-row">
                <label for="textColor">Text Color</label>
                <input type="color" id="textColor" value="#333333">
              </div>
              <div class="style-row">
                <label for="backgroundColor">Background</label>
                <input type="color" id="backgroundColor" value="#ffffff">
              </div>
              <div class="style-row">
                <label for="headingColor">Headings</label>
                <input type="color" id="headingColor" value="#1a1a1a">
              </div>
              <div class="style-row">
                <label for="linkColor">Links</label>
                <input type="color" id="linkColor" value="#0066cc">
              </div>
              <div class="style-row">
                <label for="codeBackground">Code Background</label>
                <input type="color" id="codeBackground" value="#f5f5f5">
              </div>
              <div class="style-row">
                <label for="codeTextColor">Code Text</label>
                <input type="color" id="codeTextColor" value="#c7254e">
              </div>
            </div>
          </div>

          <!-- Margins Section -->
          <div class="style-section" id="marginsSection">
            <div class="section-header" data-section="margins">
              <span>Margins</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content">
              <div class="style-row">
                <label for="pageMarginCustom">Page Margin</label>
                <input type="text" id="pageMarginCustom" placeholder="e.g., 1in, 20mm, 2cm" value="1in">
              </div>
            </div>
          </div>

          <!-- Table Styling Section -->
          <div class="style-section" id="tableSection">
            <div class="section-header" data-section="table">
              <span>Table Styling</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content">
              <div class="style-row">
                <label class="checkbox-label">
                  <input type="checkbox" id="tableBorders" checked>
                  <span>Show Borders</span>
                </label>
              </div>
              <div class="style-row">
                <label class="checkbox-label">
                  <input type="checkbox" id="tableAlternateRows" checked>
                  <span>Alternate Row Colors</span>
                </label>
              </div>
              <div class="style-row">
                <label for="tableBorderWidth">Border Width</label>
                <input type="text" id="tableBorderWidth" placeholder="e.g., 1px, 2px" value="1px">
              </div>
              <div class="style-row">
                <label for="tableCellPadding">Cell Padding</label>
                <input type="text" id="tableCellPadding" placeholder="e.g., 8px, 12px" value="8px">
              </div>
              <div class="style-row">
                <label for="tableHeaderBackground">Header Background</label>
                <input type="color" id="tableHeaderBackground" value="#f5f5f5">
              </div>
              <div class="style-row">
                <label for="tableHeaderText">Header Text Color</label>
                <input type="color" id="tableHeaderText" value="#333333">
              </div>
            </div>
          </div>

          <!-- Image Styling Section -->
          <div class="style-section" id="imageSection">
            <div class="section-header" data-section="image">
              <span>Image Styling</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content">
              <div class="style-row">
                <label for="imageMaxWidth">Max Width</label>
                <input type="text" id="imageMaxWidth" placeholder="e.g., 100%, 500px" value="100%">
              </div>
              <div class="style-row">
                <label for="imageAlignment">Alignment</label>
                <select id="imageAlignment">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
              <div class="style-row">
                <label for="imageSpacing">Spacing</label>
                <input type="text" id="imageSpacing" placeholder="e.g., 16px, 1em" value="16px">
              </div>
            </div>
          </div>

          <!-- List Styling Section -->
          <div class="style-section" id="listSection">
            <div class="section-header" data-section="list">
              <span>List Styling</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content">
              <div class="style-row">
                <label for="listBulletStyle">Bullet Style</label>
                <select id="listBulletStyle">
                  <option value="disc" selected>Disc (•)</option>
                  <option value="circle">Circle (◦)</option>
                  <option value="square">Square (■)</option>
                </select>
              </div>
              <div class="style-row">
                <label for="listNumberStyle">Number Style</label>
                <select id="listNumberStyle">
                  <option value="decimal" selected>1, 2, 3</option>
                  <option value="lower-alpha">a, b, c</option>
                  <option value="upper-alpha">A, B, C</option>
                  <option value="lower-roman">i, ii, iii</option>
                  <option value="upper-roman">I, II, III</option>
                </select>
              </div>
              <div class="style-row">
                <label for="listIndentation">Indentation</label>
                <input type="text" id="listIndentation" placeholder="e.g., 2em, 20px" value="2em">
              </div>
              <div class="style-row">
                <label for="listItemSpacing">Item Spacing</label>
                <input type="text" id="listItemSpacing" placeholder="e.g., 0.5em, 8px" value="0.5em">
              </div>
            </div>
          </div>

          <!-- Code Block Styling Section -->
          <div class="style-section" id="codeSection">
            <div class="section-header" data-section="code">
              <span>Code Block Styling</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content">
              <div class="style-row">
                <label for="codeBorderRadius">Border Radius</label>
                <input type="text" id="codeBorderRadius" placeholder="e.g., 4px, 8px" value="6px">
              </div>
              <div class="style-row">
                <label for="codePadding">Padding</label>
                <input type="text" id="codePadding" placeholder="e.g., 12px, 16px" value="16px">
              </div>
              <div class="style-row">
                <label for="codeLineHeight">Line Height</label>
                <input type="text" id="codeLineHeight" placeholder="e.g., 1.5, 1.8" value="1.5">
              </div>
            </div>
          </div>

          <!-- Link Styling Section -->
          <div class="style-section" id="linkSection">
            <div class="section-header" data-section="link">
              <span>Link Styling</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content">
              <div class="style-row">
                <label class="checkbox-label">
                  <input type="checkbox" id="linkUnderline" checked>
                  <span>Underline Links</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Heading Spacing Section -->
          <div class="style-section" id="headingSection">
            <div class="section-header" data-section="heading">
              <span>Heading Spacing</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content">
              <div class="style-row">
                <label for="headingMarginTop">Top Margin</label>
                <input type="text" id="headingMarginTop" placeholder="e.g., 1.5em, 20px" value="1.5em">
              </div>
              <div class="style-row">
                <label for="headingMarginBottom">Bottom Margin</label>
                <input type="text" id="headingMarginBottom" placeholder="e.g., 0.5em, 10px" value="0.5em">
              </div>
            </div>
          </div>

          <!-- Blockquote Styling Section -->
          <div class="style-section" id="blockquoteSection">
            <div class="section-header" data-section="blockquote">
              <span>Blockquote Styling</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content">
              <div class="style-row">
                <label for="blockquoteBorderColor">Border Color</label>
                <input type="color" id="blockquoteBorderColor" value="#0066cc">
              </div>
              <div class="style-row">
                <label for="blockquoteBackground">Background Color</label>
                <input type="color" id="blockquoteBackground" value="#f0f0f0">
              </div>
            </div>
          </div>

          <!-- Text & Spacing Section -->
          <div class="style-section" id="textSpacingSection">
            <div class="section-header" data-section="textSpacing">
              <span>Text & Spacing</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content">
              <div class="style-row">
                <label for="textAlignment">Text Alignment</label>
                <select id="textAlignment">
                  <option value="left" selected>Left</option>
                  <option value="center">Center</option>
                  <option value="right">Right</option>
                  <option value="justify">Justify</option>
                </select>
              </div>
              <div class="style-row">
                <label for="letterSpacing">Letter Spacing</label>
                <input type="text" id="letterSpacing" placeholder="e.g., 0px, 1px" value="0px">
              </div>
              <div class="style-row">
                <label for="wordSpacing">Word Spacing</label>
                <input type="text" id="wordSpacing" placeholder="e.g., 0px, 2px" value="0px">
              </div>
            </div>
          </div>

          <!-- PDF Headers/Footers Section -->
          <div class="style-section" id="pdfHeaderFooterSection">
            <div class="section-header" data-section="pdfHeaderFooter">
              <span>PDF Headers/Footers</span>
              <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="section-content">
              <div class="style-row">
                <label for="pdfHeaderText">Header Text</label>
                <input type="text" id="pdfHeaderText" placeholder="Leave empty for no header">
              </div>
              <div class="style-row">
                <label for="pdfFooterText">Footer Text</label>
                <input type="text" id="pdfFooterText" placeholder="Leave empty for no footer">
              </div>
              <div class="style-row">
                <label class="checkbox-label">
                  <input type="checkbox" id="pdfPageNumbers" checked>
                  <span>Show Page Numbers</span>
                </label>
              </div>
              <div class="style-row">
                <label for="pdfPageNumberPosition">Page Number Position</label>
                <select id="pdfPageNumberPosition">
                  <option value="footer-right" selected>Footer Right</option>
                  <option value="footer-center">Footer Center</option>
                  <option value="footer-left">Footer Left</option>
                  <option value="header-right">Header Right</option>
                  <option value="header-center">Header Center</option>
                  <option value="header-left">Header Left</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        </div>

        <div class="action-buttons">
          <button class="btn-convert" id="convertBtn" disabled>
            Convert All to PDF
          </button>
        </div>

        <div id="status" class="status"></div>
      </div>

      <footer>
        <p>Powered by Marked & Puppeteer</p>
      </footer>
    </div>

    <!-- Main content area with editor and preview -->
    <div class="main-content">
      <!-- Editor Panel -->
      <div class="editor-panel" id="editorPanel">
        <div class="panel-header">
          <h3>Markdown Editor <span class="unsaved-indicator" id="unsavedIndicator"></span></h3>
          <div class="panel-header-actions">
            <button class="btn-save" id="saveEditorBtn" title="Save changes to file" style="display: none;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                <polyline points="17 21 17 13 7 13 7 21"></polyline>
                <polyline points="7 3 7 8 15 8"></polyline>
              </svg>
              Save
            </button>
            <button class="btn-expand" id="expandEditorBtn" title="Expand editor">
              <svg class="icon-expand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 3 21 3 21 9"></polyline>
                <polyline points="9 21 3 21 3 15"></polyline>
                <line x1="21" y1="3" x2="3" y2="21"></line>
              </svg>
              <svg class="icon-shrink" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
                <polyline points="9 3 3 3 3 9"></polyline>
                <polyline points="21 21 21 15 15 15"></polyline>
                <line x1="3" y1="21" x2="21" y2="3"></line>
              </svg>
            </button>
          </div>
        </div>
        <div class="panel-content">
          <textarea id="editorTextarea" placeholder="Paste or type your Markdown here...&#10;&#10;Changes will be reflected live in the preview panel."></textarea>
        </div>
      </div>

      <!-- Preview Panel -->
      <div class="preview-panel" id="previewPanel">
        <div class="panel-header">
          <h3>PDF Preview</h3>
          <button class="btn-expand" id="expandPreviewBtn" title="Expand preview">
            <svg class="icon-expand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15 3 21 3 21 9"></polyline>
              <polyline points="9 21 3 21 3 15"></polyline>
              <line x1="21" y1="3" x2="3" y2="21"></line>
            </svg>
            <svg class="icon-shrink" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
              <polyline points="9 3 3 3 3 9"></polyline>
              <polyline points="21 21 21 15 15 15"></polyline>
              <line x1="3" y1="21" x2="21" y2="3"></line>
            </svg>
          </button>
        </div>
        <div class="preview-content">
          <iframe id="previewFrame" sandbox="allow-same-origin"></iframe>
        </div>
      </div>
    </div>
  </div>

  <!-- Save Mode Modal -->
  <div class="modal-overlay" id="saveModeModal" style="display: none;">
    <div class="modal">
      <div class="modal-header">
        <h3>Save Options</h3>
      </div>
      <div class="modal-body">
        <p>You have multiple files to convert. How would you like to save them?</p>
        <div class="modal-options">
          <button class="modal-option" id="saveOneByOne">
            <div class="option-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
              </svg>
            </div>
            <div class="option-text">
              <strong>Save One by One</strong>
              <span>Choose location for each file individually</span>
            </div>
          </button>
          <button class="modal-option" id="saveAllTogether">
            <div class="option-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
              </svg>
            </div>
            <div class="option-text">
              <strong>Save All to Folder</strong>
              <span>Choose a folder and save all files there</span>
            </div>
          </button>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" id="cancelSaveMode">Cancel</button>
      </div>
    </div>
  </div>

  <!-- License Registration Modal -->
  <div class="modal-overlay" id="licenseModal" style="display: none;">
    <div class="modal license-modal">
      <div class="modal-header">
        <h3>Enter License Key</h3>
      </div>
      <div class="modal-body">
        <p class="license-description">Enter your license key to unlock unlimited conversions.</p>
        <div class="license-input-group">
          <input type="text" id="licenseKeyInput" placeholder="MDPDF-XXXX-XXXX-XXXX-XXXX" maxlength="29" autocomplete="off" spellcheck="false">
          <p class="license-error" id="licenseError"></p>
        </div>
        <div class="license-purchase">
          <p>Don't have a license?</p>
          <a href="https://jeswinarulsamuel.gumroad.com/l/ojiwme" target="_blank" class="btn-purchase">Purchase License ($12.99)</a>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" id="cancelLicense">Cancel</button>
        <button class="btn-activate" id="activateLicense">Activate</button>
      </div>
    </div>
  </div>

  <!-- Trial Expired Modal -->
  <div class="modal-overlay" id="trialExpiredModal" style="display: none;">
    <div class="modal trial-expired-modal">
      <div class="modal-header">
        <h3>Trial Expired</h3>
      </div>
      <div class="modal-body">
        <div class="trial-expired-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </div>
        <p class="trial-expired-message">Your free trial has ended. Purchase a license to continue converting Markdown files to PDF.</p>
        <div class="trial-features">
          <h4>With a license you get:</h4>
          <ul>
            <li>Unlimited file conversions</li>
            <li>Lifetime access - no subscription</li>
            <li>Free updates</li>
          </ul>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-enter-key" id="enterLicenseKey">I have a license key</button>
        <a href="https://jeswinarulsamuel.gumroad.com/l/ojiwme" target="_blank" class="btn-purchase-now">Purchase License ($12.99)</a>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
